.PHONY: gen mocks test dbtest alltest

gen:
	go generate ./...

MOCKS=DB Mailer

mocks:
	mockery -recursive -name "$(shell echo "$(MOCKS)" | tr ' ' '|')"

test:
	go generate ./...
	go test -tags '!db' ./...

dbtest:
	go generate ./...
	go test -tags db ./...

alltest:
	go generate ./...
	go test ./...
